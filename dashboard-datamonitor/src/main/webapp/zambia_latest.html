<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Admin Dashboard | Dashboard Data Monitor</title>

    <!-- Font Awesome -->
    <link href="media/css/font-awesome.min.css" rel="stylesheet">
    
    <link href="media/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="media/css/custom.min.css" rel="stylesheet"> 
    
    <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/2.9.0/moment.min.js"></script>
 
<!-- Include date range picker plugin -->
<script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/1/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/1/daterangepicker-bs3.css" />
    
    <style>
	#flow_name_top h1{
		font-size:25px !important;
	}
	</style>
  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a href="./" class="site_title"><i class="glyphicon glyphicon-stats"></i> <span>Admin Dashboard</span></a>
            </div>

            <div class="clearfix"></div>

            <!-- menu profile quick info -->
            <div class="profile">
              <div class="profile_pic">
                <img src="media/images/user.png" alt="..." class="img-circle profile_img">
              </div>
              <div class="profile_info">
                <span>Welcome,</span>
                <h4 style="color:#ffffff">Admin</h4>
              </div>
            </div>
            <!-- /menu profile quick info -->

            <br /><br /><br /><br /><br />

            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-map-marker"></i> Kenya <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="kenya.html">Dashboard</a></li>
                      <li><a href="ktable.html">Table</a></li>
                      <li><a href="flow-analytics-kenya.html">Flow Analytics</a></li>
                      <li><a href="contact-analytics-kenya.html">Contact Analysis</a></li>
                      <li><a href="kenya_map.html">Map</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-map-marker"></i> Zambia <span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="zambia.html">Dashboard</a></li>
                      <li><a href="ztable.html">Table</a></li>
                      <li><a href="flow-analytics-zambia.html">Flow Analytics</a></li>
                      <li><a href="contact-analytics-zambia.html">Contact Analytics</a></li>
                      <li><a href="zambia_map.html">Map</a></li>
                    </ul>
                  </li>                  
                </ul>
              </div>

            </div>
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav class="" role="navigation">
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>
					
              <ul class="nav navbar-nav navbar-right">
              <div style="text-align:left;float:left;font-size:30px;"><strong>Questions Analysis - Zambia</strong></div>
                <li class="">
                  <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <img src="media/images/user.png" alt="">Admin
                    <span class=" fa fa-angle-down"></span>
                  </a>
                  <ul class="dropdown-menu dropdown-usermenu pull-right">
                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                  </ul>
                </li>                
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
        	 <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard_graph x_panel">
                  <div class="row x_title">
                    <div class="col-md-6">
                      <h3>Farmers Response Rate <small> -  over time</small></h3>
                    </div>
                    <div class="col-md-6">
                      <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                        <span>December 30, 2014 - January 28, 2015</span> <b class="caret"></b>
                      </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                          <button type="submit" class="btn btn-success pull-right" id="saveBtn">Submit</button>
                        </div>
                     </div>
                  </div>
                <div>
                  <div id="chartContainer" class="demo-placeholder" style="height:350px !important;width:100% !important;"></div>
                </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>  
            
            
            
            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard_graph x_panel">
                  <div class="row x_title">
                    <div class="col-md-6">
                      <h3>File sizes by type per week <small> -  over time</small></h3>
                    </div>
                    <div class="col-md-6">
                      <div id="reportrange1" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 0px;">
                        <label for="sel1">Select number of past weeks from today:</label>
                          <select class="form-control" id="sel1">
                            <option>1 week</option>
                            <option>2 weeks</option>
                            <option>3 weeks</option>
                            <option>4 weeks</option>
                            <option>5 week</option>
                            <option>6 weeks</option>
                            <option>7 weeks</option>
                            <option>8 weeks</option>
                            <option>9 week</option>
                            <option>10 weeks</option>
                            <option>11 weeks</option>
                            <option>12 weeks</option>
                          </select>
                      </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                          <button type="submit" class="btn btn-success pull-right" id="saveBtn1">Submit</button>
                        </div>
                     </div>
                  </div>
                <div>
                  <div id="chartContainer1" class="demo-placeholder" style="height:350px !important;width:100% !important;"></div>
                </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>  
            
            
            
            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="dashboard_graph x_panel">
                  <div class="row x_title">
                    <div class="col-md-6">
                      <h3>Number of farmers indicated yes/no to the “Did it rain…” question <small> -  over time</small></h3>
                    </div>
                    <div class="col-md-6">
                      <div id="reportrange2" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                        <span>December 30, 2014 - January 28, 2015</span> <b class="caret"></b>
                      </div>
                    </div>
                    <hr>
                    <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                          <button type="submit" class="btn btn-success pull-right" id="saveBtn2">Submit</button>
                        </div>
                     </div>
                  </div>
                <div>
                  <div id="chartContainer2" class="demo-placeholder" style="height:350px !important;width:100% !important;"></div>
                </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>   
		</div>
        
        
        <!-- /page content -->    
      
      <!-- footer content -->
        <footer>
          <div class="pull-right">
           Dashboard Data Monitor - Admin Monitoring UI
          </div>
          <div class="clearfix"></div>
        </footer>
      <!-- /footer content -->
    </div>
   </div>

    <!-- Bootstrap -->
    <script src="media/js/bootstrap.min.js"></script>
    <!-- Custom Theme Scripts -->
    <script src="media/js/custom.min.js"></script>
    <script type="text/javascript" src="media/js/jquery.canvasjs.min.js"></script>
    <script type="text/javascript">
	
		var startDate;
		var endDate;

		var FromEndDate = new Date();
		var textit_prefix = "./api/zambia";
		
		$(document).ready(function() {
			var today = FromEndDate;
			
			var now = new Date();
			var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
			var lastMonday = new Date(today.setDate(today.getDate()-(today.getDay()-1)%7));
			var beforeMonday = new Date(lastMonday.getFullYear(), lastMonday.getMonth(), lastMonday.getDate()-7);
			var lastbeforeMonday = new Date(lastMonday.getFullYear(), lastMonday.getMonth(), lastMonday.getDate()-14);
			var lasttwobeforeMonday = new Date(lastMonday.getFullYear(), lastMonday.getMonth(), lastMonday.getDate()-21);
			var lastthreebeforeMonday = new Date(lastMonday.getFullYear(), lastMonday.getMonth(), lastMonday.getDate()-28);
			
			var to_date = moment(lastMonday).format("YYYY-MM-DD'T'HH:mm:ss.SSS");
			var from_date = moment(beforeMonday).format("YYYY-MM-DD'T'HH:mm:ss.SSS");


/* New code for first graph */		
		
			$.ajax({
				url: textit_prefix + "/flowcompletion?from=" + from_date + "&to=" + to_date,
				success: function (frdata) {				
				
				flow_steps_correct_final_data = [];
				flow_name_array = [];
				
		
					for (j in frdata){
							flow_steps_corrct_data = [];
							
							if (frdata[j].flow_name.indexOf("harvest") >= 0 || frdata[j].flow_name.indexOf("growing") >= 0 || frdata[j].flow_name.indexOf("inter-season") >= 0 || frdata[j].flow_name.indexOf("planting") >= 0) {
								if (frdata[j].hasOwnProperty("matrix")){									
									flow_name_array.push(frdata[j].flow_name);
									for (q=0; q < frdata[j].matrix.length; q++){
								
									not_ans = frdata[j].matrix[q].perc;
									ques_label = frdata[j].matrix[q].hour;
									
									flow_steps_corrct_data.push({"x" : ques_label, "y" : not_ans});	
									}
								}
								flow_steps_correct_final_data.push(flow_steps_corrct_data)						
							}
						
					}
		
				}
		});
		
		setTimeout(function () {
		
		if (flow_steps_correct_final_data.length == 1){
		
		
		var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: flow_steps_correct_final_data[0]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
		
		}else if(flow_steps_correct_final_data.length == 2){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: flow_steps_correct_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: flow_steps_correct_final_data[1]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
			
		}else if(flow_steps_correct_final_data.length == 3){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: flow_steps_correct_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[1],
			dataPoints: flow_steps_correct_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[2],
			dataPoints: flow_steps_correct_final_data[2]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if (flow_steps_correct_final_data.length == 4){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: flow_steps_correct_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[1],
			dataPoints: flow_steps_correct_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[2],
			dataPoints: flow_steps_correct_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: flow_steps_correct_final_data[3]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();			
			
		}
	  
	  }, 1500);
	  
	  /*  ##### */

	/* 2nd graph */
	var week_count = 4;
	$.ajax({
		url: textit_prefix + "/filesize?count=" + week_count,
		success: function (sdata) {	
	
		flow_size_runs_array = [];
		flow_size_flows_array = [];
		flow_size_contacts_array = [];	
	
	for (f in sdata){
		week_label = new Date(sdata[f].week);
		new_week_label = moment(week_label).format('YYYY MMM DD');
		if (sdata[f].matrix[0].type == "runs"){
			flow_size_runs_array.push({"label" : new_week_label, "y" : sdata[f].matrix[0].count});
		}else if (sdata[f].matrix[0].type == "flows"){
			flow_size_flows_array.push({"label" : new_week_label, "y" : sdata[f].matrix[0].count});	
		}else if ((sdata[f].matrix[0].type == "contacts"){
			flow_size_contacts_array.push({"label" : new_week_label, "y" : sdata[f].matrix[0].count});
		}
		}

		}
	});
	
	
	var chart = new CanvasJS.Chart("chartContainer1",
		{
			title:{
				text: "File sizes by type"
			},
			toolTip: {
				shared: true
			},			
			axisY: {
				title: "size of file(in kb)"
			},
			axisX: {
				title: "Time (in weeks)",
				interval: 1,
				labelAngle : -15
			},
			exportEnabled: true,				
			data: [ 
			{
				type: "column",	
				name: "Runs",
				legendText: "Runs",
				showInLegend: true, 
				dataPoints:flow_size_runs_array
			},
			{
				type: "column",	
				name: "Flows",
				legendText: "Flows",
				showInLegend: true,
				dataPoints:flow_size_flows_array
			},
			{
				type: "column",	
				name: "Contacts",
				legendText: "Contacts",
				showInLegend: true,
				dataPoints:flow_size_contacts_array
			}
			
			],
          legend:{
            cursor:"pointer",
            itemclick: function(e){
              if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
              	e.dataSeries.visible = false;
              }
              else {
                e.dataSeries.visible = true;
              }
            	chart.render();
            }
          },
        });

chart.render();

/* ############ */



/* 3rd graph */
ques_type = "rain"
$.ajax({
				url: textit_prefix + "/questionanalysis?type=" + ques_type + "&from=" + from_date + "&to=" + to_date,
				success: function (frdata) {				
				
				flow_steps_correct_final_data = [];
				flow_name_array = [];
				
		
					for (j in frdata){
							flow_steps_corrct_data = [];
							
							if (frdata[j].flow_name.indexOf("harvest") >= 0 || frdata[j].flow_name.indexOf("growing") >= 0 || frdata[j].flow_name.indexOf("inter-season") >= 0 || frdata[j].flow_name.indexOf("planting") >= 0) {
								if (frdata[j].hasOwnProperty("matrix")){									
									flow_name_array.push(frdata[j].flow_name);
									for (q=0; q < frdata[j].matrix.length; q++){
								
									not_ans = frdata[j].matrix[q].perc;
									ques_label = frdata[j].matrix[q].hour;
									
									flow_steps_corrct_data.push({"x" : ques_label, "y" : not_ans});	
									}
								}
								flow_steps_correct_final_data.push(flow_steps_corrct_data)						
							}
						
					}
		
				}
		});

/* ######## */


var chart = new CanvasJS.Chart("chartContainer2",
		{
			title:{
				text: "Number of farmers indicated yes/no to the “Did it rain…” question",
				fontSize: 30
			},
			toolTip: {
				shared: true
			},			
			axisY: {
				title: "Number of farmers"
			},		
			data: [ 
			{
				type: "column",	
				name: "Yes",
				legendText: "Yes",
				showInLegend: true, 
				dataPoints:[
				{label: "Jan", y: 262},
				{label: "Feb", y: 211},
				{label: "Mar", y: 175},
				{label: "Apr", y: 137},
				{label: "May", y: 115},
				{label: "June", y: 104},
				{label: "Jul", y: 97},
				{label: "Aug", y: 60},
				{label: "Sep", y: 23},
				{label: "Oct", y: 20}


				]
			},
			{
				type: "column",	
				name: "No",
				legendText: "No",
				showInLegend: true,
				dataPoints:[
				{label: "Jan", y: 111},
				{label: "Feb", y: 25},
				{label: "Mar", y: 36},
				{label: "Apr", y: 42},
				{label: "May", y: 26},
				{label: "June", y: 27},
				{label: "Jul", y: 31},
				{label: "Aug", y: 102},
				{label: "Sep", y: 103},
				{label: "Oct", y: 43}


				]
			}
			
			],
          legend:{
            cursor:"pointer",
            itemclick: function(e){
              if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
              	e.dataSeries.visible = false;
              }
              else {
                e.dataSeries.visible = true;
              }
            	chart.render();
            }
          },
        });

chart.render();
	
	
	
	
	
    $('#reportrange').daterangepicker(
       {
          startDate: beforeMonday,
          endDate: lastMonday,
          minDate: '01/01/2012',
          maxDate: FromEndDate,
          dateLimit: { days: 60 },
          showDropdowns: true,
          showWeekNumbers: true,
          timePicker: false,
          timePickerIncrement: 1,
          timePicker12Hour: true,
          ranges: {
             //'Today': [moment(), moment()],
             //'Yesterday': [moment().subtract('days', 1), moment().subtract('days', 1)],
             'Last Week': [moment(beforeMonday), moment(lastMonday)],
			 'Last 2 Weeks' : [moment(lastbeforeMonday), moment(lastMonday)],
             'Last 3 Weeks': [moment(lasttwobeforeMonday), moment(lastMonday)],
			 'Last 4 Weeks': [moment(lastthreebeforeMonday), moment(lastMonday)],
             'This Month': [moment().startOf('month'), moment().endOf('month')],
             'Last Month': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
          },
          opens: 'left',
          buttonClasses: ['btn btn-default'],
          applyClass: 'btn-small btn-primary',
          cancelClass: 'btn-small',
          format: 'DD/MM/YYYY',
          separator: ' to ',
          locale: {
              applyLabel: 'Submit',
              fromLabel: 'From',
              toLabel: 'To',
              customRangeLabel: 'Custom Range',
              daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr','Sa'],
              monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
              firstDay: 1
          }
       },
       function(start, end) {
        console.log("Callback has been called!");
        $('#reportrange span').html(start.format('D MMMM YYYY') + ' - ' + end.format('D MMMM YYYY'));
        startDate = start;
         endDate = end;    

       }
    );
    //Set the initial state of the picker label
    $('#reportrange span').html(moment(beforeMonday).format('D MMMM YYYY') + ' - ' + moment(lastMonday).format('D MMMM YYYY'));

    $('#saveBtn').click(function(){
        console.log(startDate.format('D MMMM YYYY') + ' - ' + endDate.format('D MMMM YYYY'));
		alert(startDate.format('D MMMM YYYY') + ' - ' + endDate.format('D MMMM YYYY'));
		from_date = startDate.format("YYYY-MM-DD'T'HH:mm:ss.SSS");
		to_date = endDate.format("YYYY-MM-DD'T'HH:mm:ss.SSS")
		
		$.ajax({
				url: textit_prefix + "/flowcompletion?from=" + from_date + "&to=" + to_date,
				success: function (frdata) {				
				
				response_final_data = [];
				flow_name_array = [];
				
		
					for (j in frdata){
							
							
							if (frdata[j].flow_name.indexOf("harvest") >= 0 || frdata[j].flow_name.indexOf("growing") >= 0 || frdata[j].flow_name.indexOf("inter-season") >= 0 || frdata[j].flow_name.indexOf("planting") >= 0) {
								
								
								if (frdata[j].hasOwnProperty("matrix")){
									flow_steps_data = [];
									flow_steps_corrct_data = [];
									flow_name_array.push(frdata[j].flow_name);
									for (q=0; q < frdata[j].matrix.length; q++){
								
										not_ans = frdata[j].matrix[q].perc;
										ques_label = frdata[j].matrix[q].hour;
										
										flow_steps_corrct_data.push({"x" : ques_label, "y" : not_ans});	
									}
									response_final_data.push(flow_steps_corrct_data)	
								}	
												
							}
						
					}
		
				}
		});
		
		
		setTimeout(function () {
		
		if (response_final_data.length == 1){
		
		
		var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
		
		}else if(response_final_data.length == 2){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
			
		}else if(response_final_data.length == 3){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if (response_final_data.length == 4){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
			
		}else if (response_final_data.length == 5){
			
			var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if(response_final_data.length == 6){
				var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[5],
			dataPoints: response_final_data[5]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if(response_final_data.length == 7){
				var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[5],
			dataPoints: response_final_data[5]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[6],
			dataPoints: response_final_data[6]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if(response_final_data.length == 8){
				var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[5],
			dataPoints: response_final_data[5]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[6],
			dataPoints: response_final_data[6]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[7],
			dataPoints: response_final_data[7]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if(response_final_data.length == 9){
				var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[5],
			dataPoints: response_final_data[5]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[6],
			dataPoints: response_final_data[6]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[7],
			dataPoints: response_final_data[7]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[8],
			dataPoints: response_final_data[8]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}else if(response_final_data.length == 10){
				var chart = new CanvasJS.Chart("chartContainer" ,
		{
		  title:{
				text: "Farmers Response Rate"
			},
			axisX:{
				interval: 12,
				title: "Time(in hours)",							
			},
			axisY:{
				interval: 10,
				title: "In Percentage(%)",							
			},
			toolTip: {
				shared: true
			},	
		  exportEnabled: true,
		  data: [ 
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[0],
			dataPoints: response_final_data[0]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[1],
			dataPoints: response_final_data[1]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true", 
			name: flow_name_array[2],
			dataPoints: response_final_data[2]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[3],
			dataPoints: response_final_data[3]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[4],
			dataPoints: response_final_data[4]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[5],
			dataPoints: response_final_data[5]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[6],
			dataPoints: response_final_data[6]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[7],
			dataPoints: response_final_data[7]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[8],
			dataPoints: response_final_data[8]
		  },
		  {        
			type: "line",
			lineThickness:3,
			showInLegend: "true",
			name: flow_name_array[9],
			dataPoints: response_final_data[9]
		  }
		  ],
		  legend:{
			cursor:"pointer",
			itemclick: function(e) {
			  if (typeof (e.dataSeries.visible) ===  "undefined" || e.dataSeries.visible) {
				  e.dataSeries.visible = false;
			  }
			  else
			  {
				e.dataSeries.visible = true;
			  }
			  chart.render();
			}
		  }
		});
	
		chart.render();
			
		}
	  
	  }, 1000);
		

    });
	
	
	
	
	
	
	$('#saveBtn1').click(function(){
        alert($('#sel1 :selected').text());
		
		
		var chart = new CanvasJS.Chart("chartContainer1",
		{
			title:{
				text: "File sizes by type per week",
				fontSize: 30
			},
			toolTip: {
				shared: true
			},			
			axisY: {
				title: "size of file in kb"
			},			
			data: [ 
			{
				type: "column",	
				name: "Runs",
				legendText: "Runs",
				showInLegend: true, 
				dataPoints:[
				{label: "week1", y: 262},
				{label: "week2", y: 211},
				{label: "week3", y: 175},
				{label: "week4", y: 137},
				{label: "week5", y: 115},
				{label: "week6", y: 104},
				{label: "week7", y: 97.8},
				{label: "week8", y: 60},
				{label: "week9", y: 23.3},
				{label: "week10", y: 20.4}


				]
			},
			{
				type: "column",	
				name: "Flows",
				legendText: "Flows",
				showInLegend: true,
				dataPoints:[
				{label: "week1", y: 111.5},
				{label: "week2", y: 211},
				{label: "week3", y: 175},
				{label: "week4", y: 137},
				{label: "week5", y: 115},
				{label: "week6", y: 104},
				{label: "week7", y: 97.8},
				{label: "week8", y: 60},
				{label: "week9", y: 23.3},
				{label: "week10", y: 20.4}


				]
			},
			{
				type: "column",	
				name: "Contacts",
				legendText: "Contacts",
				showInLegend: true,
				dataPoints:[
				{label: "week1", y: 115.5},
				{label: "week2", y: 211},
				{label: "week3", y: 175},
				{label: "week4", y: 137},
				{label: "week5", y: 115},
				{label: "week6", y: 104},
				{label: "week7", y: 97.8},
				{label: "week8", y: 60},
				{label: "week9", y: 23.3},
				{label: "week10", y: 20.4}


				]
			}
			
			],
          legend:{
            cursor:"pointer",
            itemclick: function(e){
              if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
              	e.dataSeries.visible = false;
              }
              else {
                e.dataSeries.visible = true;
              }
            	chart.render();
            }
          },
        });

chart.render();

    });
	
	
	
	
	
	
	
	
	
	
	$('#reportrange2').daterangepicker(
       {
          startDate: moment().subtract('days', 29),
          endDate: moment(),
          minDate: '01/01/2012',
          maxDate: FromEndDate,
          dateLimit: { days: 60 },
          showDropdowns: true,
          showWeekNumbers: true,
          timePicker: false,
          timePickerIncrement: 1,
          timePicker12Hour: true,
          ranges: {
             'Today': [moment(), moment()],
             'Yesterday': [moment().subtract('days', 1), moment().subtract('days', 1)],
             'Last 7 Days': [moment().subtract('days', 6), moment()],
             'Last 30 Days': [moment().subtract('days', 29), moment()],
             'This Month': [moment().startOf('month'), moment().endOf('month')],
             'Last Month': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
          },
          opens: 'left',
          buttonClasses: ['btn btn-default'],
          applyClass: 'btn-small btn-primary',
          cancelClass: 'btn-small',
          format: 'DD/MM/YYYY',
          separator: ' to ',
          locale: {
              applyLabel: 'Submit',
              fromLabel: 'From',
              toLabel: 'To',
              customRangeLabel: 'Custom Range',
              daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr','Sa'],
              monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
              firstDay: 1
          }
       },
       function(start, end) {
        console.log("Callback has been called!");
        $('#reportrange2 span').html(start.format('D MMMM YYYY') + ' - ' + end.format('D MMMM YYYY'));
        startDate = start;
         endDate = end;    

       }
    );
    //Set the initial state of the picker label
    $('#reportrange2 span').html(moment().subtract('days', 29).format('D MMMM YYYY') + ' - ' + moment().format('D MMMM YYYY'));
	
	
	$('#saveBtn2').click(function(){
        console.log(startDate.format('D MMMM YYYY') + ' - ' + endDate.format('D MMMM YYYY'));
		alert(startDate.format('D MMMM YYYY') + ' - ' + endDate.format('D MMMM YYYY'));
	
	
	var chart = new CanvasJS.Chart("chartContainer2",
		{
			title:{
				text: "Number of farmers indicated yes/no to the “Did it rain…” question",
				fontSize: 30
			},
			toolTip: {
				shared: true
			},			
			axisY: {
				title: "Number of farmers"
			},		
			data: [ 
			{
				type: "column",	
				name: "Yes",
				legendText: "Yes",
				showInLegend: true, 
				dataPoints:[
				{label: "Jan", y: 262},
				{label: "Feb", y: 211},
				{label: "Mar", y: 175},
				{label: "Apr", y: 137},
				{label: "May", y: 115},
				{label: "June", y: 104},
				{label: "Jul", y: 97},
				{label: "Aug", y: 60},
				{label: "Sep", y: 23},
				{label: "Oct", y: 20}


				]
			},
			{
				type: "column",	
				name: "No",
				legendText: "No",
				showInLegend: true,
				dataPoints:[
				{label: "Jan", y: 111},
				{label: "Feb", y: 25},
				{label: "Mar", y: 36},
				{label: "Apr", y: 42},
				{label: "May", y: 26},
				{label: "June", y: 27},
				{label: "Jul", y: 31},
				{label: "Aug", y: 102},
				{label: "Sep", y: 103},
				{label: "Oct", y: 43}


				]
			}
			
			],
          legend:{
            cursor:"pointer",
            itemclick: function(e){
              if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
              	e.dataSeries.visible = false;
              }
              else {
                e.dataSeries.visible = true;
              }
            	chart.render();
            }
          },
        });

chart.render();
	

	});
	
 });
</script>
  </body>
</html>